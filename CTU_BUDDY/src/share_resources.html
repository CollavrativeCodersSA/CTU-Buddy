<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/resources.css" />
    <link
      rel="stylesheet"
      href="assets/Icons/fontawesome-free-6.5.2-web/css/all.min.css"
    />
    <title>Share Resources</title>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="/CTU_BUDDY/src/home.html">Home</a></li>
          <li><a href="/CTU_BUDDY/src/timetable.html">TIMETABLE</a></li>
          <li><a href="/CTU_BUDDY/src/discussions.html">DISCUSSIONS</a></li>
          <li><a href="/CTU_BUDDY/src/contact.html">CONTACT US</a></li>
        </ul>
        <div class="button-container">
          <a href="#upload-modal" class="upload-btn">Upload Resources</a>
          <a href="#signup-modal" class="signup-btn">Sign Up</a>
        </div>
      </nav>

      <section class="hero-section">
        <div class="hero-content">
          <h1>Welcome to Share Resources</h1>
          <p>Find and share the best resources for your studies.</p>
          <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder=" Search..." />
          </div>
        </div>
      </section>
    </header>

    <!-- Modal for Upload Resources -->
    <div id="upload-modal" class="modal">
      <div class="modal-content">
        <h2>Select Resource Type</h2>
        <p>What type of resource would you like to add?</p>
        <form id="upload-form">
          <label>
            <input
              type="radio"
              name="resource-type"
              value="video"
              id="video-option"
            />
            Video
          </label>
          <label>
            <input
              type="radio"
              name="resource-type"
              value="pdf"
              id="pdf-option"
            />
            PDF
          </label>

          <!-- Video Link Input -->
          <div id="video-link-container" style="display: none">
            <label for="video-link">YouTube Video Link:</label>
            <input
              type="text"
              id="video-link"
              name="video-link"
              placeholder="Enter YouTube link"
            />
          </div>

          <!-- File Upload Input -->
          <div id="file-upload-container" style="display: none">
            <label for="file-upload">Upload File:</label>
            <input type="file" id="file-upload" name="file-upload" />
          </div>

          <label for="resource-description">Description:</label>
          <textarea
            id="resource-description"
            name="description"
            rows="4"
            placeholder="Enter a brief description of the resource"
          ></textarea>

          <div class="modal-buttons">
            <a href="#" class="btn-cancel">Cancel</a>
            <button type="submit" class="btn-submit">Upload</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal for Sign Up (optional) -->
    <div id="signup-modal" class="modal">
      <div class="modal-content">
        <h2>Sign Up</h2>
        <form action="#">
          <!-- Sign up form fields here -->
          <div class="modal-buttons">
            <a href="#" class="btn-cancel">Cancel</a>
            <button type="submit" class="btn-submit">Sign Up</button>
          </div>
        </form>
      </div>
    </div>

    <section class="featured">
      <h3>Featured Video</h3>
      <div class="content">
        <video width="90%" controls>
          <source
            src="assets/videos/y2mate.com - Git Explained in 100 Seconds_1080p.mp4"
            type="video/mp4"
          />
          Your browser does not support the video tag
        </video>
        <div class="video-description">
          <h3>Git Explained in 100 Seconds</h3>
          <p>Get a quick overview of Git in this concise video.</p>
        </div>
      </div>
    </section>

    <section class="resources" id="resources-list">
      <!-- Resource cards will be added here dynamically -->
    </section>

    <footer>
      <div class="website-name-type">
        <h3>CTU Buddy</h3>
      </div>
      <div class="website-info">
        <div class="about-us">
          <h3>About Us</h3>
          <p>
            CTU Buddy is your go-to platform for all things campus-related. From
            managing your timetable to sharing resources and engaging in
            discussions, we're here to make your student life easier and more
            connected. Join us in creating a collaborative and supportive
            learning environment!
          </p>
        </div>
        <div class="more-information">
          <h3>More Information</h3>
          <ul>
            <li>More Search</li>
            <li>Testimonials</li>
            <li>Feedback</li>
          </ul>
        </div>
        <div class="useful-links">
          <h3>Useful Links</h3>
          <ul>
            <li>Terms of Use</li>
            <li>Privacy Policy</li>
            <li>FAQs</li>
          </ul>
        </div>
        <div class="contact-us">
          <h3>Contact Us</h3>
          <ul>
            <li><i class="fa-solid fa-envelope"></i> hello@gmail.com</li>
            <li><i class="fa-solid fa-phone"></i> 085 840 2727</li>
            <li><i class="fa-solid fa-location-dot"></i> 17 Hello Street</li>
          </ul>
        </div>
      </div>
      <small>CTU Buddy &copy; 2024 All rights reserved </small>
    </footer>
    <script>
      // Load saved resources from localStorage
      document.addEventListener('DOMContentLoaded', function () {
        const resourcesList = document.getElementById('resources-list');
        const savedResources = JSON.parse(localStorage.getItem('resources')) || [];

        savedResources.forEach((resource, index) => {
          const resourceCard = createResourceCard(resource, index);
          resourcesList.appendChild(resourceCard);
        });
      });

      // Save resource on upload
      document.getElementById('upload-form').addEventListener('submit', function (e) {
        e.preventDefault();
        const resourceType = document.querySelector('input[name="resource-type"]:checked').value;
        const description = document.getElementById('resource-description').value;
        let resourceLink = '';

        if (resourceType === 'video') {
          resourceLink = document.getElementById('video-link').value;
        } else if (resourceType === 'pdf') {
          resourceLink = document.getElementById('file-upload').files[0].name; // Just saving the filename for now
        }

        const newResource = { resourceType, description, resourceLink };
        saveResource(newResource);

        // Update UI
        const resourceCard = createResourceCard(newResource, getSavedResources().length - 1);
        document.getElementById('resources-list').appendChild(resourceCard);

        // Clear form and close modal
        document.getElementById('upload-form').reset();
        document.getElementById('video-link-container').style.display = 'none';
        document.getElementById('file-upload-container').style.display = 'none';
      });

      // Create resource card
      function createResourceCard(resource, index) {
        const resourceCard = document.createElement('div');
        resourceCard.classList.add('resource-card');
        resourceCard.innerHTML = `
          <p>${resource.description}</p>
          <button class="button-color-blue">
            ${resource.resourceType === 'video' ? 'Watch Video' : 'Download PDF'}
          </button>
          <button class="button-color-red" onclick="deleteResource(${index})">Delete</button>
        `;
        return resourceCard;
      }

      // Save resource to localStorage
      function saveResource(resource) {
        const savedResources = getSavedResources();
        savedResources.push(resource);
        localStorage.setItem('resources', JSON.stringify(savedResources));
      }

      // Delete resource
      function deleteResource(index) {
        const savedResources = getSavedResources();
        savedResources.splice(index, 1); // Remove the resource at the given index
        localStorage.setItem('resources', JSON.stringify(savedResources));
        updateResourceList();
      }

      // Update UI resource list
      function updateResourceList() {
        const resourcesList = document.getElementById('resources-list');
        resourcesList.innerHTML = ''; // Clear the existing list
        const savedResources = getSavedResources();
        savedResources.forEach((resource, index) => {
          const resourceCard = createResourceCard(resource, index);
          resourcesList.appendChild(resourceCard);
        });
      }

      // Get resources from localStorage
      function getSavedResources() {
        return JSON.parse(localStorage.getItem('resources')) || [];
      }

      // Show video link input or file upload input based on selected type
      document.getElementById('video-option').addEventListener('change', function () {
        document.getElementById('video-link-container').style.display = 'block';
        document.getElementById('file-upload-container').style.display = 'none';
      });

      document.getElementById('pdf-option').addEventListener('change', function () {
        document.getElementById('video-link-container').style.display = 'none';
        document.getElementById('file-upload-container').style.display = 'block';
      });
    </script>
  </body>
</html>
